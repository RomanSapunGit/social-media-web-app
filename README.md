# Social Media Java Application

This application is a social media web app built using Spring Boot and other various technologies. The main purpose of this application is to provide a platform where users can interact with each other through posts, comments, likes, etc.

## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes.

## Features
* User authentication: Users can register, login, and logout even using Google auth. The users' data might be updated in database based on Google token sent from Google.
* Post creation: Users can create posts.
* Post viewing: Users can view their own posts and the posts of others.
* Saved posts and comments: Users can save posts and comments for future view
* Commenting: Users can comment on posts.
* Interactivity: Users can see the changes in comment and post view sections (update or adding new comments, post update).
* Security: Only authenticated users may see the posts, comments, posts etc. The security is achieved using csrf and cookie session.
* Statistics: Based on user consent application collects user interactions across application
* Translation: Based on target language the post might be translated
* Liking: Users can like or dislike posts.

### Prerequisites

Ensure you have the following installed on your machine:

* Java 17
* Maven

### Installing

Clone the repository to your local machine:

`git clone https://github.com/RomanSapunGit.git`


Navigate to the cloned directory:

cd /path/to/cloned/directory


Build the project:

`mvn clean install`


Run the application:

`mvn spring-boot:run` for running only backend application or run docker compose with all required environment variables

Notice, that even using `mvn spring-boot:run` you still need necessary environment variables and working database

## Environment variables

Set the environment variables in a run configuration (IntelliJ IDEA) or set the variables directly in a command for application run

`BASE64_CODE`: secret key or token generated by your application or a third-party service. It's often encoded in Base64 format for security reasons.

`CLIENT_ID`: typically obtained from Google Cloud Console when you create a new OAuth 2.0 Client ID.

`DB_ENDPOINT`, DB_PASSWORD, DB_USERNAME: credentials for accessing your database. They would be set based on your database configuration.

`FRONTEND_URL`: URL where your frontend application is hosted.

`LIBRETRANSLATE_URL`:  endpoint for a LibreTranslate instance, which is a self-hosted translation API. If we don't intend to interact with it, we can simply write any url we don't use (http://localhsot:5001 for example)

`MAIL_PASSWORD`, `MAIL_USERNAME`: Your email credentials from which the emails will be sent

`SLACK_WEBHOOK_URL`: This is the URL for a Slack webhook, which allows your application to send messages to a Slack channel

### Default environment variables:
`INIT_MODE`=always (Initialization for sql script. Set on always for default user/table creation if the database lacks necessary table)

`LOG_CONFIGURATION`=TRACE (flag indicating whether we want detailed logs in application console. Helps identify the errors and unexpected behaviors)

`TEST_ENVIRONMENT`=false (flag indicating whether the application is running in a testing environment. The flag tells application to not add csrf protection if true)

## Built With

* [Spring Boot](https://spring.io/projects/spring-boot) - The framework used for building the application
* [Spring Security](https://spring.io/projects/spring-security) - For authentication and authorization
* [Lombok](https://projectlombok.org/) - To reduce boilerplate code
* [MySQL](https://www.mysql.com/) - As the database
* [Google API Client](https://developers.google.com/api-client-library/java) - Used for Google services integration (mostly token-related)
* [GraphQL](https://graphql.org/) - For efficient data querying

## Libraries & tools

The project uses several dependencies including but not limited to:

* Spring Boot Starter Web
* Spring Boot Starter Security
* Lombok
* MySQL
* Spring Boot Starter Data JPA
* Spring Security Config
* Spring Security Web
* Spring Boot Starter Mail
* JavaMail API
* JJWT API
* Google API Client
* Guava
* Mockito
* Spring Boot Starter WebSocket
* Spring Boot Starter WebFlux
* Micrometer Registry Prometheus
* Spring Boot Starter Actuator
* Spring Boot Starter AOP
* Spring Security Messaging
* Spring Context
* Spring Boot Starter GraphQL
* GraphQL Java Tools
* GraphQL Java Extended Scalars
* Spring GraphQL Test
* GraphQL Spring Boot Starter Test
* Docker
* WebSocket

## Performance tracking
Used Integration tests and prometheus for testing and tracking average response time of endpoint
[Prometheus](https://prometheus.io/docs/concepts/metric_types/) - basic retrieving and observing metrics from application in human-readable way
[Graphana](https://grafana.com) - more comfortable web app for tracking performance

## Author

* **Roman** - *work, deployment and testing* - [RomanSapunGit](https://github.com/RomanSapunGit)

# Version 1.1 (Jul 25 - Aug 15)

Added mockito testing, displaying user profiles in angular, deployed application in a docker, added image cropper for
cropping image with basic set of tools, persistent displaying single post after reloading, made image caching in a
client side (deprecated), implemented 'endless' post list, disabled text selection during scrolling through posts,
added notification window in client side, added search bar, dropdown menu, implemented adding custom image during registration,
creating posts

# Version 1.2 (Aug 16 - Sep 06)

Implemented subscriptions, sending notifications to a slack, real time communication between users (during creating
comments or updating post), disabled text selection during dragging mat dialogs,made navigation-bar.component.html
sticky, resolved bugs related to caching and overall displaying comments and images,
# Version 1.1 (Jul 25 - Aug 15)

Added mockito testing, displaying user profiles in angular, deployed application in a docker, added image cropper for
cropping image with basic set of tools, persistent displaying single post after reloading, made image caching in a
client side (deprecated), implemented 'endless' post list, disabled text selection during scrolling through posts,
added notification window in client side, added search bar, dropdown menu, implemented adding custom image during registration,
creating posts

# Version 1.2 (Aug 16 - Sep 06)

Implemented subscriptions, sending notifications to a slack, real time communication between users (during creating
comments or updating post), disabled text selection during dragging mat dialogs,made navigation-bar.component.html
sticky, resolved bugs related to caching and overall displaying comments and images,
